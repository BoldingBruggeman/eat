# This script is intended to be source'd, not executed

set -e

REPO_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

external_model_dir=$REPO_DIR/extern

extra_institutes="-DFABM_EXTRA_INSTITUTES=ogs -DFABM_OGS_BASE=$external_model_dir/ogs"

# Build eat
WORK_DIR=`mktemp -d`
cmake -S ${REPO_DIR} -B ${WORK_DIR} $extra_institutes $@
cmake --build ${WORK_DIR} --parallel 4 --target install
rm -rf ${WORK_DIR}
